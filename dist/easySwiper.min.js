(function(g,e){if("function"===typeof define&&define.amd)define(["exports","module"],e);else if("undefined"!==typeof exports&&"undefined"!==typeof module)e(exports,module);else{var d={exports:{}};e(d.exports,d);g.easySwiper=d.exports}})(this,function(g,e){function d(a){this.$el=a.element;this.initNum=a.initNum||0;this.params=a;this.now=this.delta=this.x=this.y=this.numDom=this.$child=null;this.canswipe=this.canscroll=!1;this.baseWidth=document.body.clientWidth;this.autoPlay=a.autoPlay||null;this._init()._emit("onInit",
{dom:this.current.dom,num:this.current.num})}var f={hasClass:function(a,b){return a.classList?a.classList.contains(b):-1<(" "+a.className+" ").indexOf(" "+b+" ")},removeClass:function(a,b){if(a.classList)a.classList.remove(b);else if(this.hasClass(a,b)){var c=" "+a.className+" ",c=c.replace(" "+clsName+" "," ");a.className=trim(c)}},addClass:function(a,b){a.classList?a.classList.add(b):hasClass(a,b)||(a.className=a.className+" "+b)}};d.prototype={_init:function(){this._bindEvents();this.$child=Array.prototype.slice.call(this.$el.children);
this.numDom=this.$child.length-1;this._initPage(this.initNum,"first");this._resetStyle();this.autoPlay&&this._autoPlay();return this},_autoPlay:function(){var a=this;this.interval?clearInterval(this.interval):"";this.interval=setInterval(function(){a._doAnimate("next")},5E3)},_emit:function(a,b){if(this.params[a])this.params[a](b)},_bindEvents:function(){var a=this;["touchstart","touchmove","touchend","touchcancel"].forEach(function(b){a.$el.addEventListener(b,a["_"+b].bind(a),!1)})},_getDomlist:function(a){a=
Number(a);this.current={dom:this.$child[a],num:a};this.prev={dom:-1<a-1?this.$child[a-1]:this.autoPlay?this.$child[this.numDom]:"",num:-1<a-1?a-1:this.autoPlay?this.numDom:""};this.next={dom:a+1>this.numDom?this.autoPlay?this.$child[0]:"":this.$child[a+1],num:a+1>this.numDom?this.autoPlay?0:"":a+1}},_initPage:function(a,b){var c=this;this.delta=null;this.canscroll=this.canswipe=!1;this._getDomlist(a);f.addClass(this.current.dom,"active");"string"==typeof b&&b||(this._emit("onChangeBegin",{dom:this.current.dom,
num:this.current.num}),this.current.dom.addEventListener("webkitTransitionEnd",function h(){"function"==typeof b&&b();c.autoPlay&&c._resetStyle();c._emit("onChangeEnd",{dom:c.current.dom,num:c.current.num});c.current.dom.removeEventListener("webkitTransitionEnd",h,!1)},!1))},_resetStyle:function(a){var b=this,c=this.current.num;this.autoPlay?this._translate([[this.current.dom,0,0],[this.next.dom,this.baseWidth,0],[this.prev.dom,-this.baseWidth,0]]):this.$child.forEach(function(a,d){c==d?b._translate(a,
0,0):d>c?b._translate(a,b.baseWidth,0):b._translate(a,-b.baseWidth,0)})},_touchstart:function(a){this.now=Date.now();this.x=a.touches[0].pageX;this.y=a.touches[0].pageY},_touchmove:function(a){if(!(this.canscroll||1<a.touches.length)){var b=a.touches[0];this.delta=b.pageX-this.x;if(!this.canswipe){if(Math.abs(b.pageY-this.y)>Math.abs(this.delta)){this.canscroll=!0;this.canswipe=!1;return}this.canswipe=!0}a.preventDefault();a.stopPropagation();this.autoPlay&&clearInterval(this.interval);!this.autoPlay&&
0>b.pageY?this._touchend():(this._translate(this.current.dom,this.delta,0),this.prev.dom&&this._translate(this.prev.dom,this.delta-this.baseWidth,0),this.next.dom&&this._translate(this.next.dom,this.delta+this.baseWidth,0))}},_touchcancel:function(a){this._touchend()},_touchend:function(a){this.autoPlay&&this._autoPlay();if(this.canscroll)this.canscroll=!1;else{a=this.baseWidth/3;var b=this.delta,c=b/(Date.now()-this.now);b>a||.5<c?this._doAnimate("prev"):-b>a||-.5>c?this._doAnimate("next"):this._doAnimate("current")}}};
d.prototype.gotoPage=function(a){var b=this;if(!(0>a||a>this.numDom||a==this.current.num||this.autoPlay)){var c=this.current.num;f.removeClass(this.current.dom,"active");c>a&&this._doAnimate("prev",{index:a,domlist:[[this.$child[a],0,300],[this.current.dom,this.baseWidth,300]],callback:function(){b._resetStyle()}});c<a&&this._doAnimate("next",{index:a,domlist:[[this.$child[a],0,300],[this.current.dom,-this.baseWidth,300]],callback:function(){b._resetStyle()}})}};d.prototype._translate=function(a,
b,c){a&&(1<a.length?a.forEach(function(a){a[0]&&(a[0].style.webkitTransform="translateX("+a[1]+"px)",a[0].style.webkitTransition="-webkit-transform "+a[2]+"ms linear")}):(a.style.webkitTransform="translateX("+b+"px)",a.style.webkitTransition="-webkit-transform "+c+"ms linear"))};d.prototype._doAnimate=function(a,b){var c=this.current.num;f.removeClass(this.current.dom,"active");"prev"==a&&this.prev.dom?(this._translate(b?b.domlist:[[this.prev.dom,0,300],[this.current.dom,this.baseWidth,300],[this.next.dom,
this.baseWidth,0]]),c=b?b.index:0>c-1&&this.autoPlay?this.numDom:c-1,this._initPage(c,b?b.callback:"")):"next"==a&&this.next.dom?(this._translate(b?b.domlist:[[this.next.dom,0,300],[this.current.dom,-this.baseWidth,300],[this.prev.dom,-this.baseWidth,0]]),c=b?b.index:c+1>this.numDom&&this.autoPlay?0:c+1,this._initPage(c,b?b.callback:"")):(this._translate([[this.current.dom,0,300],[this.prev.dom,-this.baseWidth,300],[this.next.dom,this.baseWidth,300]]),this._initPage(c,"current"))};e.exports=d});