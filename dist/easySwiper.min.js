"use strict";!function(t,i){if("function"==typeof define&&define.amd)define(["exports","module"],i);else if("undefined"!=typeof exports&&"undefined"!=typeof module)i(exports,module);else{var s={exports:{}};i(s.exports,s),t.easySwiper=s.exports}}(this,function(t,i){function s(t){this.$el=t.element,this.initNum=t.initNum||0,this.params=t,this.$child=null,this.numDom=null,this.x=this.y=null,this.delta=null,this.now=null,this.canscroll=!1,this.canswipe=!1,this.baseWidth=document.body.clientWidth,this.autoPlay=t.autoPlay||null,this._init()._emit("onInit",{dom:this.current.dom,num:this.current.num})}var e={hasClass:function(t,i){return t.classList?t.classList.contains(i):(" "+t.className+" ").indexOf(" "+i+" ")>-1},removeClass:function(t,i){if(t.classList)return void t.classList.remove(i);if(this.hasClass(t,i)){var s=" "+t.className+" ";s=s.replace(" "+clsName+" "," "),t.className=trim(s)}},addClass:function(t,i){return t.classList?void t.classList.add(i):void(hasClass(t,i)||(t.className=t.className+" "+i))}};s.prototype={_init:function(){return this._bindEvents(),this.$child=Array.prototype.slice.call(this.$el.children),this.numDom=this.$child.length-1,this._initPage(this.initNum,"first"),this._resetStyle(),this.autoPlay&&this._autoPlay(),this},_autoPlay:function(){var t=this;this.interval?clearInterval(this.interval):"",this.interval=setInterval(function(){t._doAnimate("next")},5e3)},_emit:function(t,i){this.params[t]&&this.params[t](i)},_bindEvents:function(){var t=this;"touchstart touchmove touchend touchcancel".split(" ").forEach(function(i){t.$el.addEventListener(i,t["_"+i].bind(t),!1)})},_getDomlist:function(t){t=Number(t),this.current={dom:this.$child[t],num:t},this.prev={dom:t-1>-1?this.$child[t-1]:this.autoPlay?this.$child[this.numDom]:"",num:t-1>-1?t-1:this.autoPlay?this.numDom:""},this.next={dom:t+1>this.numDom?this.autoPlay?this.$child[0]:"":this.$child[t+1],num:t+1>this.numDom?this.autoPlay?0:"":t+1}},_initPage:function(t,i){var s=this;if(this.delta=null,this.canscroll=this.canswipe=!1,this._getDomlist(t),e.addClass(this.current.dom,"active"),"string"!=typeof i||!i){this._emit("onChangeBegin",{dom:this.current.dom,num:this.current.num});var n=function t(){"function"==typeof i&&i(),s.autoPlay&&s._resetStyle(),s._emit("onChangeEnd",{dom:s.current.dom,num:s.current.num}),s.current.dom.removeEventListener("webkitTransitionEnd",t,!1)};this.current.dom.addEventListener("webkitTransitionEnd",n,!1)}},_resetStyle:function(t){var i=this,s=this.current.num;return this.autoPlay?void this._translate([[this.current.dom,0,0],[this.next.dom,this.baseWidth,0],[this.prev.dom,-this.baseWidth,0]]):void this.$child.forEach(function(t,e){s==e?i._translate(t,0,0):e>s?i._translate(t,i.baseWidth,0):i._translate(t,-i.baseWidth,0)})},_touchstart:function(t){this.now=Date.now(),this.x=t.touches[0].pageX,this.y=t.touches[0].pageY},_touchmove:function(t){if(!(this.canscroll||t.touches.length>1)){var i=t.touches[0];if(this.delta=i.pageX-this.x,!this.canswipe){if(Math.abs(i.pageY-this.y)>Math.abs(this.delta))return this.canscroll=!0,void(this.canswipe=!1);this.canswipe=!0}if(t.preventDefault(),t.stopPropagation(),this.autoPlay&&clearInterval(this.interval),!this.autoPlay&&i.pageY<0)return void this._touchend();this._translate(this.current.dom,this.delta,0),this.prev.dom&&this._translate(this.prev.dom,this.delta-this.baseWidth,0),this.next.dom&&this._translate(this.next.dom,this.delta+this.baseWidth,0)}},_touchcancel:function(t){this._touchend()},_touchend:function(t){if(this.autoPlay&&this._autoPlay(),this.canscroll)return void(this.canscroll=!1);if(this.delta){var i=this.baseWidth/3,s=this.delta,e=s/(Date.now()-this.now);return s>i||e>.5?void this._doAnimate("prev"):-s>i||e<-.5?void this._doAnimate("next"):void this._doAnimate("current")}}},s.prototype.gotoPage=function(t){var i=this;if(!(t<0||t>this.numDom||t==this.current.num||this.autoPlay)){var s=this.current.num;e.removeClass(this.current.dom,"active"),s>t&&this._doAnimate("prev",{index:t,domlist:[[this.$child[t],0,300],[this.current.dom,this.baseWidth,300]],callback:function(){i._resetStyle()}}),s<t&&this._doAnimate("next",{index:t,domlist:[[this.$child[t],0,300],[this.current.dom,-this.baseWidth,300]],callback:function(){i._resetStyle()}})}},s.prototype._translate=function(t,i,s){if(t){if(t.length>1)return void t.forEach(function(t){t[0]&&(t[0].style.webkitTransform="translateX("+t[1]+"px)",t[0].style.webkitTransition="-webkit-transform "+t[2]+"ms linear")});t.style.webkitTransform="translateX("+i+"px)",t.style.webkitTransition="-webkit-transform "+s+"ms linear"}},s.prototype._doAnimate=function(t,i){var s=this.current.num;e.removeClass(this.current.dom,"active"),"prev"==t&&this.prev.dom?(this._translate(i?i.domlist:[[this.prev.dom,0,300],[this.current.dom,this.baseWidth,300],[this.next.dom,this.baseWidth,0]]),s=i?i.index:s-1<0&&this.autoPlay?this.numDom:s-1,this._initPage(s,i?i.callback:"")):"next"==t&&this.next.dom?(this._translate(i?i.domlist:[[this.next.dom,0,300],[this.current.dom,-this.baseWidth,300],[this.prev.dom,-this.baseWidth,0]]),s=i?i.index:s+1>this.numDom&&this.autoPlay?0:s+1,this._initPage(s,i?i.callback:"")):(this._translate([[this.current.dom,0,300],[this.prev.dom,-this.baseWidth,300],[this.next.dom,this.baseWidth,300]]),this._initPage(s,"current"))},i.exports=s});